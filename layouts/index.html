{{ define "main" }}
<main>
  <div>

    {{ if .Site.Params.Portrait.Path }}
      <img src="{{ .Site.Params.Portrait.Path }}"
           class="circle"
           alt="{{ .Site.Params.Portrait.Alt }}"
           style="max-width:{{ .Site.Params.Portrait.MaxWidth }}" />
    {{ end }}

    <h1>{{ .Site.Title }}</h1>

    <div style="text-align: center; max-width: 800px; margin: 2rem auto;">
      <h2>An advanced AI clinical assistant using Retrieval-Augmented Generation (RAG)</h2>
      <p style="font-size: 1.1rem; line-height: 1.6;">
        ClinicalGuidelines.io combines GraphRAG and DeepSeek to transform complex clinical practice guidelines into fast,
        accurate, and citation-backed answers. Built on the ESVS guidelines and validated against official
        clinical questions, our chatbot matches expert-level interpretation with transparency and reliability.
      </p>

      <ul style="text-align: left; margin: 2rem auto; max-width: 600px; line-height: 1.6;">
        <li>📚 Expert-level interpretation of vascular guidelines</li>
        <li>🔗 Graph-based knowledge retrieval for deeper reasoning</li>
        <li>📎 Evidence-based answers with class/level citations</li>
        <li>🔒 No hallucinations, full transparency</li>
      </ul>

      <!-- Call-to-action -->
      <div id="menu" style="margin-top: 2rem;">
        <button onclick="loadIframe('https://chat.clinicalguidelines.io/')"
                style="background-color: #0077cc; color: white; padding: 1rem 2rem; font-size: 1.2rem; border: none; border-radius: 8px; cursor: pointer;">
          Sign up for Early Access
        </button>
      </div>

      <!-- IFRAME SECTION -->
      <div id="appFrame" style="display:none;">
        <div style="text-align:center; margin-top: 1rem;">
          <button onclick="goBack()"
                  style="background: none; color: #0077cc; border: none; text-decoration: underline; cursor: pointer;">
            ← Back to Info
          </button>
        </div>
        <div class="iframe-container">
          <iframe id="appIframe"></iframe>
        </div>
      </div>
    </div>

    <script>
      function loadIframe(url) {
        document.getElementById("menu").style.display = "none";
        document.getElementById("appFrame").style.display = "block";
        document.getElementById("appIframe").src = url;
      }
      function goBack() {
        document.getElementById("menu").style.display = "block";
        document.getElementById("appFrame").style.display = "none";
        document.getElementById("appIframe").src = "";
      }
    </script>

    <!-- Ensure original footer/partials remain intact -->
    {{ partial "subtitle.html" . }}
    {{- with .Site.Params.social }}
      <div>
        {{ partial "social-icons.html" . }}
      </div>
    {{- end }}

  </div>
</main>
{{ end }}
